<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">

   <script src="https://unpkg.com/vue"></script>

</head>
<body>
   <div id="vue-app">
      <input id="inputFileToLoad" type="file" multiple="multiple" onchange="encodeImageFileAsURL();" />
      <button @click="uploadImage">Send</button>
      <img id="imgTest1" style="max-height: 200px; max-width: 200px;">
      <img id="imgTest2" style="max-height: 200px; max-width: 200px;">
   </div>
</body>

<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script type='text/javascript'>

   let vue = new Vue({
      el : "#vue-app",
      data : {
         base64_array : []
      },
      methods : {
         uploadImage(base64) {
            Array.prototype.forEach.call(vue.base64_array, base64_image => {
               let img = { 
                  base64_string : base64_image
               }

               axios.post("/WebProject/data/images", img)
                  .then(response => {
                     if (response.status == 200) {
                        console.table(img)
                     }
                  }) 
                  .catch(error => {
                     console.log(error.data)
                  })
               })
         }
      }
   })

   function toBase(file) {
      return new Promise((resolve, reject) => {
         let reader = new FileReader();
         reader.onload = () => {
            resolve(reader.result)
         };
         reader.readAsDataURL(file);
      })
   }

   function encodeImageFileAsURL() {
      vue.base64_array = new Array();     // Empty previously existing images

      let filesSelected = document.getElementById("inputFileToLoad").files;
         if (filesSelected.length > 0) {
            let promise = Promise.resolve();
            Array.prototype.forEach.call(filesSelected, file => {
               toBase(file).then(result => vue.base64_array.push(result))
            })
         }
   }
   
   
 </script>
</html>